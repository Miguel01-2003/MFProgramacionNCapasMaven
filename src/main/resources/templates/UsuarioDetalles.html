<!DOCTYPE html>

<html>
    <head>
        <title>Detalles de usuario</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
         <style>
            body {
                background-color: #143642;
            }
            #direccion{
                background-color: beige;
                border-radius: 20px;
                padding: 3%;
                margin: 1%;
            }
            #contenedor{
                padding: 3%;
                background-color: #DAD2D8;
                border-radius: 20px;
            }
        </style>
        
    </head>
    <body>
        
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
              Launch demo modal
            </button>

            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    ...
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                  </div>
                </div>
              </div>
            </div>  
        
        <br>
        <div class="container" id="contenedor">
            <div class="row">
                <h1>Datos del Usuario</h1>
            </div>
        </div>
        <br>
        <div class="container" id="contenedor">
            <div class="row">
                <div class="col" >
                    <h4>Fotografia:</h4>
                </div>
                <div class="col-9" >
                    <h4>Datos personales: </h4>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-3 " ><!-- Aqui va la fotografia (izquierda)-->
                    <img th:if="${usuario.Imagen}"  th:src="'data:image/png;base64,' +${usuario.Imagen}" class="img-thumbnail" style="max-width: 270px;  max-height: 270px; width: 100%; height: auto;">
                    <img th:unless="${usuario.Imagen}" src="https://static.vecteezy.com/system/resources/previews/008/442/086/original/illustration-of-human-icon-user-symbol-icon-modern-design-on-blank-background-free-vector.jpg" class="img-thumbnail" style="max-width: 270px; max-height: 270px; width: 100%; height: auto;">
                </div>
                <div class="col"><!-- Aqui los datos del usuario 8(Derecha)-->

                    <p><h6>Nombre: </h6><strong th:text="${usuario.ApellidoMaterno}? |${usuario.Nombre} ${usuario.ApellidoPaterno} ${usuario.ApellidoMaterno}| : |${usuario.Nombre} ${usuario.ApellidoPaterno}|"></strong></p>
                    
                    <p><h6>Usuario: </h6><strong th:text="|  ${usuario.UserName}|"></strong></p>
                
                    <h6>Sexo: </h6>
                    <p th:if="${usuario.Sexo == 'MA'}" class="text-primary"><i class="bi bi-gender-male"></i><strong th:text="|  Masculino|"></strong></p>
                    <p th:if="${usuario.Sexo == 'FE'}" class="text-danger"><i class="bi bi-gender-female"></i><strong th:text="|  Femenino|"></strong></p>
                    
                    <h6>Fecha de nacimiento: </h6>
                    <p><i class="bi bi-calendar-event"></i><strong th:text="|  ${usuario.FechaNacimiento}|"></strong></p>
                    
                    
                </div>
                <div class="col">
                    <h6>Correo: </h6>
                    <p><i class="bi bi-envelope-at"></i><strong th:text="|  ${usuario.email}|"></strong></p>
                     
                    <h6>Telefono: </h6>
                    <p><i class="bi bi-telephone"></i><strong th:text="|  ${usuario.Telefono}|"></strong></p>
                    
                    <h6 th:if="${usuario.Celular}" >Celular: </h6>
                    <p th:if="${usuario.Celular}" ><i class="bi bi-phone"></i><strong th:text="|  ${usuario.Celular}|"></strong></p>
                     
                    <h6 th:if="${usuario.CURP}">CURP: </h6>
                    <p th:if="${usuario.CURP}"><i class="bi bi-file-earmark-text"></i><strong th:text="|  ${usuario.CURP}|"></strong></p>
                     
                    
                </div>
                <div class="col">
                    <h6>Rol: </h6>
                    <p><i class="bi bi-person-vcard"></i><strong th:text="|  ${usuario.Rol.Nombre}|"></strong></p>
                </div>
            </div>
            <div class="row" >
                <div class="col-3">
                    <center><button class="btn btn-warning" ><i class="bi bi-image-fill"></i><strong th:text="|  Editar Imagen|"></strong></button></center>
                </div>
                <div class="col-9" >
                    <center><button class="btn btn-warning" ><i class="bi bi-person-fill-gear"></i> <strong th:text="|  Editar datos del usuario|"></strong></button></center>
                </div>
            </div>
        </div>
        <br>
        <div class="container" id="contenedor">
            <div class="row">
                <div class="col">
                    <h4>Direcciones: </h4>
                </div>
                <div class="col-2">
                    <a href=" " class="btn btn-success">
                        <i class="bi bi-building-fill-add"></i> <strong>Agregar direccion</strong>
                </a>
                </div>
            </div>
            
            <div class="row" th:each="direccion, stat: ${usuario.direcciones}" id="direccion"><!-- Aqui todos los datos de las direcciones -->
                <div class="col">
                    <h6>Pais:</h6>
                    <p><strong th:text="|  ${direccion.Colonia.Municipio.Estado.Pais.Nombre}|"></strong></p>

                    <h6>Estado:</h6>
                    <p><strong th:text="|  ${direccion.Colonia.Municipio.Estado.Nombre}|"></strong></p>

                </div>
                <div class="col">
                    <h6>Municipio:</h6>
                    <p><strong th:text="|  ${direccion.Colonia.Municipio.Nombre}|"></strong></p>

                    <h6>Colonia:</h6>
                    <p><strong th:text="|  ${direccion.Colonia.Nombre}|"></strong></p>
                </div>
                <div class="col">
                    <h6>Codigo postal:</h6>
                    <p><strong th:text="|  ${direccion.Colonia.CodigoPostal }|"></strong></p>

                    <h6>Calle:</h6>
                    <p><strong th:text="|  ${direccion.Calle}|"></strong></p>
                    
                </div>
                <div class="col">
                    <h6>Numero Exterior:</h6>
                    <p><strong th:text="|  ${direccion.NumeroExterior}|"></strong></p>

                    <h6 th:if="${direccion.NumeroInterior}">Numero Interior</h6>
                    <p th:if="${direccion.NumeroInterior}"><strong th:text="|  ${direccion.NumeroInterior}|"></strong></p>
                </div>
                <div class="col">
                    <a  href=" "
                       class="btn btn-warning">
                        <i class="bi bi-pencil-square"></i> <strong>Editar</strong>
                    </a>
                    <br><br>
                    <form th:action="@{/usuario/GetById/{id}/delete/{idDireccion}(id=${usuario.IdUsuario}, idDireccion =${direccion.IdDireccion})}" method="post">
                        <button class="btn btn-danger" type="button" id="eliminarDireccionBoton">
                             <i class="bi bi-trash3-fill"></i> <strong>Eliminar</strong>
                        </button>
                    </form>
                    
                </div>
            </div>
        </div>
    </body>
    <script>
        
        document.querySelectorAll("#eliminarDireccionBoton").forEach(btn => {
 
            btn.addEventListener("click", function(){

                const form = this.closest("form");

                Swal.fire({
                    title: "¿Eliminar direccion?",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: "Sí"
                }).then(result => {

                    if(result.isConfirmed){
                        form.submit();
                    }

                });

            });

        });
            
    </script>
</html>
